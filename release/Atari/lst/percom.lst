ca65 V2.17 - Git 59ab140
Main file   : ..\src\utils\percom.a65
Current file: ..\src\utils\percom.a65

000000r 1               PTR		=	0
000000r 1               LFTMARGIN	=	$52
000000r 1               
000000r 1               DVSTAT		=	$2ea
000000r 1               
000000r 1               DDEVIC		=	$300
000000r 1               DUNIT		=	$301
000000r 1               DCOMND		=	$302
000000r 1               DSTATS		=	$303
000000r 1               DBUFLO		=	$304
000000r 1               DBUFHI		=	$305
000000r 1               DTIMLO		=	$306
000000r 1               DBYTLO		=	$308
000000r 1               DBYTHI		=	$309
000000r 1               DAUX1		=	$30A
000000r 1               DAUX2		=	$30B
000000r 1               
000000r 1               ICCOM		=	$342
000000r 1               ICSTA		=	$344
000000r 1               ICBAL		=	$344
000000r 1               ICBAH		=	$345
000000r 1               ICBLL		=	$348
000000r 1               ICBLH		=	$349
000000r 1               ICAX1		=	$34A
000000r 1               ICAX2		=	$34B
000000r 1               
000000r 1               CIOV		=	$E456
000000r 1               SIOV		=	$E459
000000r 1               
000000r 1               CCOPEN		=	3
000000r 1               CGETB		=	7
000000r 1               CPUTB		=	11
000000r 1               CCLOSE		=	12
000000r 1               
000000r 1               CREAD		=	64
000000r 1               CWRITE		=	128
000000r 1               
000000r 1               CLS		=	$7D
000000r 1               EOL		=	$9B
000000r 1               ;
000000r 1               		.org	$2000
002000  1               ;
002000  1  A9 00        START:		lda	#0
002002  1  85 52        		sta	LFTMARGIN
002004  1               
002004  1  A9 F1        		lda	#<SALLYMSG
002006  1  85 00        		sta	PTR
002008  1  A9 26        		lda	#>SALLYMSG
00200A  1  85 01        		sta	PTR+1
00200C  1  20 1F 25     		jsr	PRTSTR
00200F  1               
00200F  1  A9 54        		lda	#<MSGDUNIT
002011  1  85 00        		sta	PTR
002013  1  A9 28        		lda	#>MSGDUNIT
002015  1  85 01        		sta	PTR+1
002017  1  20 1F 25     		jsr	PRTSTR
00201A  1               
00201A  1  AD 01 03     		lda	DUNIT				;DUNIT
00201D  1  A2 00        		ldx	#0
00201F  1  20 7E 26     		jsr	PRTWORD
002022  1               
002022  1  20 75 26     		jsr	GETKEY
002025  1  C9 44        		cmp	#'D'
002027  1  F0 2B        		beq	DODUMP
002029  1  C9 46        		cmp	#'F'
00202B  1  F0 2A        		beq	DOFORMAT
00202D  1  C9 47        		cmp	#'G'
00202F  1  F0 29        		beq	DOGOTO
002031  1  C9 4E        		cmp	#'N'
002033  1  F0 28        		beq	DONACK
002035  1  C9 50        		cmp	#'P'
002037  1  F0 36        		beq	DOPERCOM
002039  1  C9 52        		cmp	#'R'
00203B  1  F0 26        		beq	DORESET
00203D  1  C9 53        		cmp	#'S'
00203F  1  F0 1F        		beq	DOGETSTAT
002041  1  C9 54        		cmp	#'T'
002043  1  F0 21        		beq	DOTESTSEC
002045  1  C9 55        		cmp	#'U'
002047  1  F0 20        		beq	DOUPLOAD
002049  1  C9 56        		cmp	#'V'
00204B  1  F0 1F        		beq	DOVERSION
00204D  1  C9 58        		cmp	#'X'
00204F  1  F0 02        		beq	EXIT
002051  1  D0 AD        		bne	START
002053  1  60           EXIT:		rts
002054  1               
002054  1  4C 3E 25     DODUMP:		jmp	DUMP
002057  1  4C 0A 23     DOFORMAT:	jmp	FORMAT
00205A  1  4C 58 22     DOGOTO:		jmp	GOTO
00205D  1  4C EF 22     DONACK:		jmp	NACK
002060  1  4C 4D 23     DOGETSTAT:	jmp	GETSTAT
002063  1  4C 3E 24     DORESET:	jmp	RESET
002066  1  4C 80 22     DOTESTSEC:	jmp	TESTSEC
002069  1  4C CD 23     DOUPLOAD:	jmp	UPLOAD
00206C  1  4C 98 23     DOVERSION:	jmp	VERSION
00206F  1               
00206F  1  A9 FC        DOPERCOM:	lda	#<PERTXT0
002071  1  85 00        		sta	PTR
002073  1  A9 27        		lda	#>PERTXT0
002075  1  85 01        		sta	PTR+1
002077  1  20 1F 25     		jsr	PRTSTR
00207A  1               
00207A  1  20 75 26     		jsr	GETKEY
00207D  1  20 56 26     		jsr	PRINT
002080  1               
002080  1  C9 31        		cmp	#'1'
002082  1  B0 03        		bcs	DOPERCOM3
002084  1  4C 00 20     		jmp	START
002087  1  C9 39        DOPERCOM3:	cmp	#'8'+1
002089  1  90 03        		bcc	DOPERCOM2
00208B  1  4C 00 20     		jmp	START
00208E  1  E9 2F        DOPERCOM2:	sbc	#'1'-2
002090  1  8D 01 03     		sta	DUNIT
002093  1               
002093  1  20 A0 21     		jsr	READPER				;read percom block
002096  1  98           		tya
002097  1  30 D6        		bmi	DOPERCOM			;iterate if error
002099  1               
002099  1  20 33 21     DOPERCOM1:	jsr	SHOWPER				;display percom block
00209C  1               
00209C  1  20 75 26     		jsr	GETKEY
00209F  1  C9 54        		cmp	#'T'
0020A1  1  F0 20        		beq	TRACKS
0020A3  1  C9 53        		cmp	#'S'
0020A5  1  F0 30        		beq	SECS
0020A7  1  C9 48        		cmp	#'H'
0020A9  1  F0 46        		beq	HEADS
0020AB  1  C9 44        		cmp	#'D'
0020AD  1  F0 56        		beq	DENSITY
0020AF  1  C9 42        		cmp	#'B'
0020B1  1  F0 66        		beq	BYTES
0020B3  1  C9 57        		cmp	#'W'
0020B5  1  F0 06        		beq	WRITEPERC
0020B7  1  C9 58        		cmp	#'X'
0020B9  1  F0 B4        		beq	DOPERCOM
0020BB  1  D0 DC        		bne	DOPERCOM1
0020BD  1               
0020BD  1               ;
0020BD  1               ;
0020BD  1               ;
0020BD  1  20 97 21     WRITEPERC:	jsr	WRITEPER
0020C0  1  4C 99 20     		jmp	DOPERCOM1
0020C3  1               
0020C3  1  A9 62        TRACKS:		lda	#<MSGTRK
0020C5  1  85 00        		sta	PTR
0020C7  1  A9 28        		lda	#>MSGTRK
0020C9  1  85 01        		sta	PTR+1
0020CB  1  20 1F 25     		jsr	PRTSTR
0020CE  1  20 D9 25     		jsr	getbyte
0020D1  1  8D E0 26     		sta	PERTRK
0020D4  1  4C 99 20     		jmp	DOPERCOM1
0020D7  1               
0020D7  1  A9 7E        SECS:		lda	#<MSGSEC
0020D9  1  85 00        		sta	PTR
0020DB  1  A9 28        		lda	#>MSGSEC
0020DD  1  85 01        		sta	PTR+1
0020DF  1  20 1F 25     		jsr	PRTSTR
0020E2  1  20 D9 25     		jsr	getbyte
0020E5  1  8D E3 26     		sta	PERSEC+1
0020E8  1  AD ED 26     		lda	WORD+1
0020EB  1  8D E2 26     		sta	PERSEC
0020EE  1  4C 99 20     		jmp	DOPERCOM1
0020F1  1               
0020F1  1  A9 8C        HEADS:		lda	#<MSGHEA
0020F3  1  85 00        		sta	PTR
0020F5  1  A9 28        		lda	#>MSGHEA
0020F7  1  85 01        		sta	PTR+1
0020F9  1  20 1F 25     		jsr	PRTSTR
0020FC  1  20 D9 25     		jsr	getbyte
0020FF  1  8D E4 26     		sta	PERHEA
002102  1  4C 99 20     		jmp	DOPERCOM1
002105  1  A9 9A        DENSITY:	lda	#<MSGDEN
002107  1  85 00        		sta	PTR
002109  1  A9 28        		lda	#>MSGDEN
00210B  1  85 01        		sta	PTR+1
00210D  1  20 1F 25     		jsr	PRTSTR
002110  1  20 D9 25     		jsr	getbyte
002113  1  8D E5 26     		sta	PERDEN
002116  1  4C 99 20     		jmp	DOPERCOM1
002119  1  A9 A8        BYTES:		lda	#<MSGBYT
00211B  1  85 00        		sta	PTR
00211D  1  A9 28        		lda	#>MSGBYT
00211F  1  85 01        		sta	PTR+1
002121  1  20 1F 25     		jsr	PRTSTR
002124  1  20 D9 25     		jsr	getbyte
002127  1  8D E7 26     		sta	PERBYT+1
00212A  1  AD ED 26     		lda	WORD+1
00212D  1  8D E6 26     		sta	PERBYT
002130  1  4C 99 20     		jmp	DOPERCOM1
002133  1               ;
002133  1               ;
002133  1               ;
002133  1  A9 20        SHOWPER:	lda	#<PERTXT1
002135  1  85 00        		sta	PTR
002137  1  A9 28        		lda	#>PERTXT1
002139  1  85 01        		sta	PTR+1
00213B  1  20 1F 25     		jsr	PRTSTR
00213E  1               
00213E  1  AD 01 03     		lda	DUNIT				;DUNIT
002141  1  A2 00        		ldx	#0
002143  1  20 7E 26     		jsr	PRTWORD
002146  1               
002146  1  20 1F 25     		jsr	PRTSTR				;TRKS
002149  1  AD E0 26     		lda	PERCOM
00214C  1  20 7E 26     		jsr	PRTWORD
00214F  1               
00214F  1  20 1F 25     		jsr	PRTSTR				;STEP
002152  1  AD E1 26     		lda	PERCOM+1
002155  1  20 7E 26     		jsr	PRTWORD
002158  1               
002158  1  20 1F 25     		jsr	PRTSTR				;SEC/TRK
00215B  1  AD E3 26     		lda	PERCOM+3
00215E  1  AE E2 26     		ldx	PERCOM+2
002161  1  20 7E 26     		jsr	PRTWORD
002164  1               
002164  1  20 1F 25     		jsr	PRTSTR				;SIDES
002167  1  AD E4 26     		lda	PERCOM+4
00216A  1               ;		clc
00216A  1               ;		adc	#1
00216A  1  20 7E 26     		jsr	PRTWORD
00216D  1               
00216D  1  20 1F 25     		jsr	PRTSTR				;DESITY
002170  1  AD E5 26     		lda	PERCOM+5
002173  1  20 7E 26     		jsr	PRTWORD
002176  1               
002176  1  20 1F 25     		jsr	PRTSTR				;BYT/SEC
002179  1  AD E7 26     		lda	PERCOM+7
00217C  1  AE E6 26     		ldx	PERCOM+6
00217F  1  20 7E 26     		jsr	PRTWORD
002182  1               
002182  1  20 1F 25     		jsr	PRTSTR				;SELECTED
002185  1  AD E8 26     		lda	PERCOM+8
002188  1  20 7E 26     		jsr	PRTWORD
00218B  1               
00218B  1  20 1F 25     		jsr	PRTSTR				;SERRATE
00218E  1  AD E9 26     		lda	PERCOM+9
002191  1  20 7E 26     		jsr	PRTWORD
002194  1               
002194  1  4C 1F 25     		jmp	PRTSTR
002197  1               
002197  1               
002197  1  A9 80        WRITEPER:	lda	#$80
002199  1  8D 03 03     		sta	DSTATS
00219C  1  A9 4F        		lda	#'O'
00219E  1  D0 07        		bne	READPER1
0021A0  1  A9 40        READPER:	lda	#$40
0021A2  1  8D 03 03     		sta	DSTATS
0021A5  1  A9 4E        		lda	#'N'
0021A7  1  8D 02 03     READPER1:	sta	DCOMND
0021AA  1  A9 E0        		lda	#<PERCOM
0021AC  1  8D 04 03     		sta	DBUFLO
0021AF  1  A9 26        		lda	#>PERCOM
0021B1  1  8D 05 03     		sta	DBUFHI
0021B4  1  A9 31        		lda	#'1'
0021B6  1  8D 00 03     		sta	DDEVIC
0021B9  1  A9 0C        		lda	#<12
0021BB  1  8D 08 03     		sta	DBYTLO
0021BE  1  A9 00        		lda	#>12
0021C0  1  8D 09 03     		sta	DBYTHI
0021C3  1  4C 89 23     		jmp	CALLSIO
0021C6  1               
0021C6  1  A9 00        SETADR:		lda	#0
0021C8  1  8D 03 03     		sta	DSTATS
0021CB  1  A9 53        		lda	#'S'
0021CD  1  8D 02 03     		sta	DCOMND
0021D0  1  A9 5A        		lda	#'Z'
0021D2  1  8D 00 03     		sta	DDEVIC
0021D5  1  A9 01        		lda	#1
0021D7  1  8D 01 03     		sta	DUNIT
0021DA  1  A9 00        		lda	#0
0021DC  1  8D 08 03     		sta	DBYTLO
0021DF  1  8D 09 03     		sta	DBYTHI
0021E2  1  AD 17 29     		lda	SALLYADR
0021E5  1  8D 0A 03     		sta	DAUX1
0021E8  1  AD 18 29     		lda	SALLYADR+1
0021EB  1  8D 0B 03     		sta	DAUX2
0021EE  1  4C 59 E4     		jmp	SIOV
0021F1  1               
0021F1  1  20 C6 21     PUTRAM:		jsr	SETADR
0021F4  1  A9 57        		lda	#'W'
0021F6  1  8D 02 03     		sta	DCOMND
0021F9  1  A9 80        		lda	#CWRITE
0021FB  1  8D 03 03     		sta	DSTATS
0021FE  1  D0 0D        		bne	GETRAM1
002200  1               
002200  1  20 C6 21     GETRAM:		jsr	SETADR
002203  1  A9 52        		lda	#'R'
002205  1  8D 02 03     		sta	DCOMND
002208  1  A9 40        		lda	#CREAD
00220A  1  8D 03 03     		sta	DSTATS
00220D  1  A9 1E        GETRAM1:	lda	#<BUFFER
00220F  1  8D 04 03     		sta	DBUFLO
002212  1  A9 29        		lda	#>BUFFER
002214  1  8D 05 03     		sta	DBUFHI
002217  1  A9 00        		lda	#0
002219  1  8D 0A 03     		sta	DAUX1
00221C  1  8D 08 03     		sta	DBYTLO
00221F  1  A9 01        		lda	#1
002221  1  8D 0B 03     		sta	DAUX2
002224  1  8D 09 03     		sta	DBYTHI
002227  1  4C 59 E4     		jmp	SIOV
00222A  1               
00222A  1  20 C6 21     GOTOADR:	jsr	SETADR
00222D  1  A9 5A        		lda	#'Z'
00222F  1  8D 00 03     		sta	DDEVIC
002232  1  A9 01        		lda	#1
002234  1  8D 01 03     		sta	DUNIT
002237  1  A9 47        		lda	#'G'
002239  1  8D 02 03     		sta	DCOMND
00223C  1  A9 00        		lda	#0
00223E  1  8D 03 03     		sta	DSTATS
002241  1  AD 17 29     		lda	SALLYADR
002244  1  8D 0A 03     		sta	DAUX1
002247  1  AD 18 29     		lda	SALLYADR+1
00224A  1  8D 0B 03     		sta	DAUX2
00224D  1  A9 00        		lda	#0
00224F  1  8D 08 03     		sta	DBYTLO
002252  1  8D 09 03     		sta	DBYTHI
002255  1  4C 59 E4     		jmp	SIOV
002258  1               ;
002258  1               ;
002258  1               ;
002258  1  20 75 25     GOTO:		jsr	getadr
00225B  1  C9 58        		cmp	#'X'
00225D  1  F0 1E        		beq	GOTOEND
00225F  1  AD EC 26     		lda	WORD
002262  1  8D 17 29     		sta	SALLYADR
002265  1  AD ED 26     		lda	WORD+1
002268  1  8D 18 29     		sta	SALLYADR+1
00226B  1  20 2A 22     		jsr	GOTOADR
00226E  1  AD 18 29     		lda	SALLYADR+1
002271  1  20 34 26     		jsr	puthex
002274  1  AD 17 29     		lda	SALLYADR
002277  1  20 34 26     		jsr	puthex
00227A  1  20 75 26     		jsr	GETKEY
00227D  1  4C 00 20     GOTOEND:	jmp	START
002280  1               ;
002280  1               ;
002280  1               ;
002280  1  20 75 25     TESTSEC:	jsr	getadr
002283  1  AD EC 26     		lda	WORD
002286  1  8D 0A 03     		sta 	DAUX1
002289  1  AD ED 26     		lda	WORD + 1
00228C  1  8D 0B 03     		sta 	DAUX2
00228F  1               
00228F  1  A9 31        		lda	#'1'
002291  1  8D 00 03     		sta	DDEVIC
002294  1  A9 52        		lda	#'R'
002296  1  8D 02 03     		sta	DCOMND
002299  1  A9 1E        		lda	#<BUFFER
00229B  1  8D 04 03     		sta	DBUFLO
00229E  1  A9 29        		lda	#>BUFFER
0022A0  1  8D 05 03     		sta	DBUFHI
0022A3  1               ;		lda	#<3800				;start at sector 1
0022A3  1               ;		sta	DAUX1
0022A3  1               ;		lda	#>3800
0022A3  1               ;		sta	DAUX2
0022A3  1  A9 40        TESTSEC1:	lda	#CREAD
0022A5  1  8D 03 03     		sta	DSTATS
0022A8  1  A9 80        		lda	#128				;standard 128 bytes/sec
0022AA  1  8D 08 03     		sta	DBYTLO
0022AD  1  A9 00        		lda	#0
0022AF  1  8D 09 03     		sta	DBYTHI
0022B2  1  AD E5 26     		lda	PERDEN				;double density?
0022B5  1  29 04        		and	#4
0022B7  1  F0 12        		beq	TESTSEC4			;no, jump to readsection
0022B9  1  AD 0B 03     		lda	DAUX2				;yes, check if DAUX2 > 0
0022BC  1  D0 07        		bne	TESTSEC2			;yes, switch to 256 bytes/sec
0022BE  1  AD 0A 03     		lda	DAUX1				;no, check if sector 1-3
0022C1  1  C9 04        		cmp	#4
0022C3  1  90 06        		bcc	TESTSEC4			;yes, just read 128 bytes
0022C5  1  0E 08 03     TESTSEC2:	asl	DBYTLO
0022C8  1  2E 09 03     		rol	DBYTHI
0022CB  1  AD 0B 03     TESTSEC4:	lda	DAUX2
0022CE  1  20 34 26     		jsr	puthex
0022D1  1  AD 0A 03     		lda	DAUX1
0022D4  1  20 34 26     		jsr	puthex
0022D7  1  20 54 26     		jsr	NEWLINE
0022DA  1  20 89 23     		jsr	CALLSIO
0022DD  1  30 0A        		bmi	TESTSEC3			;if error, quit read loop
0022DF  1  EE 0A 03     		inc	DAUX1				;increment DAUX1/2
0022E2  1  D0 BF        		bne	TESTSEC1
0022E4  1  EE 0B 03     		inc	DAUX2
0022E7  1  D0 BA        		bne	TESTSEC1
0022E9  1  20 75 26     TESTSEC3:	jsr	GETKEY
0022EC  1  4C 00 20     		jmp	START
0022EF  1               
0022EF  1               ;
0022EF  1               ;
0022EF  1               ;
0022EF  1  A9 31        NACK:		lda	#'1'
0022F1  1  8D 00 03     		sta	DDEVIC
0022F4  1  A9 58        		lda	#'X'
0022F6  1  8D 02 03     		sta	DCOMND
0022F9  1  A9 00        		lda	#0
0022FB  1  8D 03 03     		sta	DSTATS
0022FE  1  8D 08 03     		sta	DBYTLO
002301  1  8D 09 03     		sta	DBYTHI
002304  1  20 89 23     		jsr	CALLSIO
002307  1  4C 00 20     		jmp	START
00230A  1               
00230A  1  A9 31        FORMAT:		lda	#'1'
00230C  1  8D 00 03     		sta	DDEVIC
00230F  1  A9 21        		lda	#'!'
002311  1  8D 02 03     		sta	DCOMND
002314  1  A9 40        		lda	#CREAD
002316  1  8D 03 03     		sta	DSTATS
002319  1  A9 1E        		lda	#<BUFFER
00231B  1  8D 04 03     		sta	DBUFLO
00231E  1  A9 29        		lda	#>BUFFER
002320  1  8D 05 03     		sta	DBUFHI
002323  1  AD 06 03     		lda	DTIMLO
002326  1  48           		pha
002327  1  A9 FF        		lda	#$ff
002329  1  8D 06 03     		sta	DTIMLO
00232C  1  A9 80        		lda	#128
00232E  1  8D 08 03     		sta	DBYTLO
002331  1  A9 00        		lda	#0
002333  1  8D 09 03     		sta	DBYTHI
002336  1  AD E5 26     		lda	PERDEN
002339  1  29 04        		and	#4
00233B  1  F0 06        		beq	FORMAT1
00233D  1  0E 08 03     		asl	DBYTLO
002340  1  2E 09 03     		rol	DBYTHI
002343  1  20 89 23     FORMAT1:	jsr	CALLSIO
002346  1  68           		pla
002347  1  8D 06 03     		sta	DTIMLO
00234A  1  4C 00 20     		jmp	START
00234D  1               
00234D  1  A9 31        GETSTAT:	lda	#'1'
00234F  1  8D 00 03     		sta	DDEVIC
002352  1  A9 53        		lda	#'S'
002354  1  8D 02 03     		sta	DCOMND
002357  1  A9 40        		lda	#CREAD
002359  1  8D 03 03     		sta	DSTATS
00235C  1  A9 EA        		lda	#<DVSTAT
00235E  1  8D 04 03     		sta	DBUFLO
002361  1  A9 02        		lda	#>DVSTAT
002363  1  8D 05 03     		sta	DBUFHI
002366  1  A9 04        		lda	#4
002368  1  8D 08 03     		sta	DBYTLO
00236B  1  A9 00        		lda	#0
00236D  1  8D 09 03     		sta	DBYTHI
002370  1  20 89 23     		jsr	CALLSIO
002373  1               
002373  1  A2 00        		ldx	#0
002375  1  BD EA 02     GETSTAT1:	lda	DVSTAT,x
002378  1  20 34 26     		jsr	puthex
00237B  1  20 50 26     		jsr	SPACE
00237E  1  E8           		inx
00237F  1  E0 04        		cpx	#4
002381  1  D0 F2        		bne	GETSTAT1
002383  1  20 75 26     		jsr	GETKEY
002386  1  4C 00 20     		jmp	START
002389  1               
002389  1  20 59 E4     CALLSIO:	jsr	SIOV
00238C  1  10 09        		bpl	CALLSIO1
00238E  1  98           		tya
00238F  1  20 34 26     		jsr	puthex
002392  1  20 50 26     		jsr	SPACE
002395  1  A0 80        		ldy	#128
002397  1  60           CALLSIO1:	rts
002398  1               
002398  1  A9 00        VERSION:	lda	#0
00239A  1  8D 17 29     		sta	SALLYADR
00239D  1  8D 18 29     		sta	SALLYADR+1
0023A0  1  20 00 22     		jsr	GETRAM
0023A3  1               
0023A3  1  38           		sec
0023A4  1  AD 4D 29     		lda	BUFFER+$2f
0023A7  1  E9 1F        		sbc	#$1f
0023A9  1  8D 17 29     		sta	SALLYADR
0023AC  1  AD 4E 29     		lda	BUFFER+$30
0023AF  1  E9 00        		sbc	#0
0023B1  1  8D 18 29     		sta	SALLYADR+1
0023B4  1  20 00 22     		jsr	GETRAM
0023B7  1               
0023B7  1  A2 00        		ldx	#0
0023B9  1  BD 1E 29     VERSION1:	lda	BUFFER,x
0023BC  1  20 56 26     		jsr	PRINT
0023BF  1  E8           		inx
0023C0  1  E0 10        		cpx	#16
0023C2  1  D0 F5        		bne	VERSION1
0023C4  1  20 54 26     		jsr	NEWLINE
0023C7  1  20 75 26     		jsr	GETKEY
0023CA  1  4C 00 20     		jmp	START
0023CD  1               
0023CD  1               ;
0023CD  1               ; uploads sally2.com to $2000 using a 256 buffer @ BUFFER
0023CD  1               ;
0023CD  1  20 4E 24     UPLOAD:		jsr	openfile
0023D0  1               
0023D0  1  A9 00        		lda	#0
0023D2  1  8D 17 29     		sta	SALLYADR
0023D5  1  A9 80        		lda	#$80
0023D7  1  8D 18 29     		sta	SALLYADR+1
0023DA  1               
0023DA  1  20 76 24     upload1:	jsr	readfile			;read a page from file
0023DD  1  BD 49 03     		lda	ICBLH,x
0023E0  1  20 34 26     		jsr	puthex
0023E3  1  BD 48 03     		lda	ICBLL,x
0023E6  1  20 34 26     		jsr	puthex
0023E9  1  20 50 26     		jsr	SPACE
0023EC  1               
0023EC  1  20 F1 21     		jsr	PUTRAM				;put to Sally RAM
0023EF  1  98           		tya
0023F0  1  20 34 26     		jsr	puthex
0023F3  1  A8           		tay
0023F4  1  30 45        		bmi	uploadex
0023F6  1               
0023F6  1  20 50 26     		jsr	SPACE
0023F9  1               
0023F9  1  AD 18 29     		lda	SALLYADR+1
0023FC  1  20 34 26     		jsr	puthex
0023FF  1  AD 17 29     		lda	SALLYADR
002402  1  20 34 26     		jsr	puthex
002405  1               
002405  1  20 54 26     		jsr	NEWLINE
002408  1               
002408  1  EE 18 29     		inc	SALLYADR+1
00240B  1  A2 10        		ldx	#$10
00240D  1  BD 49 03     		lda	ICBLH,x				;check if 256 were loaded
002410  1  D0 C8        		bne	upload1				;loop if yes
002412  1               
002412  1  20 9E 24     		jsr	closefile
002415  1               
002415  1  A9 00        		lda	#0
002417  1  8D 17 29     		sta	SALLYADR
00241A  1  A9 80        		lda	#$80
00241C  1  8D 18 29     		sta	SALLYADR+1
00241F  1  20 00 22     		jsr	GETRAM
002422  1               
002422  1  38           		sec
002423  1  AD 4D 29     		lda	BUFFER+$2f
002426  1  E9 0F        		sbc	#$0f
002428  1  8D 17 29     		sta	SALLYADR
00242B  1  AD 4E 29     		lda	BUFFER+$30
00242E  1  E9 00        		sbc	#0
002430  1  69 7F        		adc	#$80-1
002432  1  8D 18 29     		sta	SALLYADR+1
002435  1               
002435  1  20 75 26     		jsr	GETKEY
002438  1  20 2A 22     		jsr	GOTOADR
00243B  1               
00243B  1  4C 00 20     uploadex:	jmp	START
00243E  1               
00243E  1  A9 39        RESET:		lda	#$39
002440  1  8D 17 29     		sta	SALLYADR
002443  1  A9 00        		lda	#0
002445  1  8D 18 29     		sta	SALLYADR+1
002448  1  20 2A 22     		jsr	GOTOADR
00244B  1  4C 00 20     		jmp	START
00244E  1               
00244E  1               ;
00244E  1               ;
00244E  1               ;
00244E  1  A2 10        openfile:	ldx	#$10
002450  1  A9 03        		lda	#CCOPEN
002452  1  9D 42 03     		sta	ICCOM,x
002455  1  A9 FF        		lda	#<sallycom
002457  1  9D 44 03     		sta	ICBAL,x
00245A  1  A9 28        		lda	#>sallycom
00245C  1  9D 45 03     		sta	ICBAH,x
00245F  1  A9 00        		lda	#0
002461  1  9D 48 03     		sta	ICBLL,x
002464  1  A9 01        		lda	#1
002466  1  9D 49 03     		sta	ICBLH,x
002469  1  A9 04        		lda	#4
00246B  1  9D 4A 03     		sta	ICAX1,x
00246E  1  A9 00        		lda	#0
002470  1  9D 4B 03     		sta	ICAX2,x
002473  1  4C 56 E4     		jmp	CIOV
002476  1               
002476  1  A2 10        readfile:	ldx	#$10
002478  1  A9 07        		lda	#CGETB
00247A  1  9D 42 03     		sta	ICCOM,x
00247D  1  A9 1E        		lda	#<BUFFER
00247F  1  9D 44 03     		sta	ICBAL,x
002482  1  A9 29        		lda	#>BUFFER
002484  1  9D 45 03     		sta	ICBAH,x
002487  1  A9 00        		lda	#$00
002489  1  9D 48 03     		sta	ICBLL,x
00248C  1  A9 01        		lda	#$01
00248E  1  9D 49 03     		sta	ICBLH,x
002491  1  A9 04        		lda	#4
002493  1  9D 4A 03     		sta	ICAX1,x
002496  1  A9 00        		lda	#0
002498  1  9D 4B 03     		sta	ICAX2,x
00249B  1  4C 56 E4     		jmp	CIOV
00249E  1               
00249E  1  A2 10        closefile:	ldx	#$10
0024A0  1  A9 0C        		lda	#CCLOSE
0024A2  1  9D 42 03     		sta	ICCOM,x
0024A5  1  4C 56 E4     		jmp	CIOV
0024A8  1               
0024A8  1               ;
0024A8  1               ;
0024A8  1               ;
0024A8  1  A2 00        dumpbuf:	ldx	#0
0024AA  1  A0 08        		ldy	#8
0024AC  1  A9 10        		lda	#16
0024AE  1  8D EC 26     		sta	WORD
0024B1  1               
0024B1  1  AD 17 29     		lda	SALLYADR
0024B4  1  8D 1B 29     		sta	DUMPADR
0024B7  1  AD 18 29     		lda	SALLYADR+1
0024BA  1  8D 1C 29     		sta	DUMPADR+1
0024BD  1               
0024BD  1  20 FF 24     dumpbuf2:	jsr	dumpadr
0024C0  1  BD 1E 29     dumpbuf1:	lda	BUFFER,x
0024C3  1  20 34 26     		jsr	puthex
0024C6  1  E8           		inx
0024C7  1  20 50 26     		jsr	SPACE
0024CA  1  88           dumpbuf3:	dey
0024CB  1  D0 F3        		bne	dumpbuf1
0024CD  1               
0024CD  1  8A           		txa
0024CE  1  38           		sec
0024CF  1  E9 08        		sbc	#8
0024D1  1  AA           		tax
0024D2  1               
0024D2  1  A0 08        		ldy	#8
0024D4  1  A9 7C        		lda	#'|'
0024D6  1  20 56 26     		jsr	PRINT
0024D9  1               
0024D9  1  BD 1E 29     dumpbuf5:	lda	BUFFER,x
0024DC  1  29 7F        		and	#$7f
0024DE  1  C9 20        		cmp	#32
0024E0  1  90 04        		bcc	dumpbuf4
0024E2  1  C9 7D        		cmp	#$7d
0024E4  1  90 02        		bcc	dumpbuf6
0024E6  1  A9 2E        dumpbuf4:	lda	#'.'
0024E8  1  20 56 26     dumpbuf6:	jsr	PRINT
0024EB  1  E8           		inx
0024EC  1  88           		dey
0024ED  1  D0 EA        		bne	dumpbuf5
0024EF  1               
0024EF  1  A9 7C        		lda	#'|'
0024F1  1  20 56 26     		jsr	PRINT
0024F4  1  20 54 26     		jsr	NEWLINE
0024F7  1               
0024F7  1  A0 08        		ldy	#8
0024F9  1  CE EC 26     		dec	WORD
0024FC  1  D0 BF        		bne	dumpbuf2
0024FE  1  60           		rts
0024FF  1               
0024FF  1  AD 1C 29     dumpadr:	lda	DUMPADR+1
002502  1  20 34 26     		jsr	puthex
002505  1  AD 1B 29     		lda	DUMPADR
002508  1  20 34 26     		jsr	puthex
00250B  1  A9 3A        		lda	#':'
00250D  1  20 56 26     		jsr	PRINT
002510  1  18           		clc
002511  1  AD 1B 29     		lda	DUMPADR
002514  1  69 08        		adc	#8
002516  1  8D 1B 29     		sta	DUMPADR
002519  1  90 03        		bcc	dumpadr1
00251B  1  EE 1C 29     		inc	DUMPADR+1
00251E  1  60           dumpadr1:	rts
00251F  1               
00251F  1  A0 00        PRTSTR:		ldy	#0
002521  1  B1 00        		lda	(PTR),Y
002523  1  F0 09        		beq	INCPTR
002525  1  20 56 26     		jsr	PRINT
002528  1  20 2E 25     		jsr	INCPTR
00252B  1  4C 1F 25     		jmp	PRTSTR
00252E  1               
00252E  1  E6 00        INCPTR:		inc	PTR
002530  1  D0 02        		bne	INCPTR1
002532  1  E6 01        		inc	PTR+1
002534  1  60           INCPTR1:	rts
002535  1               
002535  1               ;
002535  1               ;
002535  1               ;
002535  1  A2 00        CLEARBUF:	ldx	#0
002537  1  9D 1E 29     CLEARBUF1:	sta	BUFFER,x
00253A  1  E8           		inx
00253B  1  D0 FA        		bne	CLEARBUF1
00253D  1  60           		rts
00253E  1               ;
00253E  1               ;
00253E  1               ;
00253E  1  20 75 25     DUMP:		jsr	getadr
002541  1  C9 58        		cmp	#'X'
002543  1  D0 03        		bne	DUMP1
002545  1  4C 00 20     		jmp	START
002548  1  C9 9B        DUMP1:		cmp	#EOL
00254A  1  D0 11        		bne	DUMP2
00254C  1  18           		clc
00254D  1  AD 17 29     		lda	SALLYADR
002550  1  69 80        		adc	#128
002552  1  8D 17 29     		sta	SALLYADR
002555  1  90 03        		bcc	DUMP4
002557  1  EE 18 29     		inc	SALLYADR+1
00255A  1  4C 69 25     DUMP4:		jmp	DUMP3
00255D  1               
00255D  1  AD EC 26     DUMP2:		lda	WORD
002560  1  8D 17 29     		sta	SALLYADR
002563  1  AD ED 26     		lda	WORD+1
002566  1  8D 18 29     		sta	SALLYADR+1
002569  1  20 54 26     DUMP3:		jsr	NEWLINE
00256C  1  20 00 22     		jsr	GETRAM
00256F  1  20 A8 24     		jsr	dumpbuf
002572  1  4C 3E 25     		jmp	DUMP
002575  1               
002575  1  A9 0C        getadr:		lda	#<msgadr
002577  1  85 00        		sta	PTR
002579  1  A9 29        		lda	#>msgadr
00257B  1  85 01        		sta	PTR+1
00257D  1  20 1F 25     		jsr	PRTSTR
002580  1               
002580  1  A9 00        		lda	#0
002582  1  8D EC 26     		sta	WORD
002585  1  8D ED 26     		sta	WORD+1
002588  1  A9 04        		lda	#4
00258A  1  8D 1D 29     		sta	CNT
00258D  1               
00258D  1  20 B0 25     getadr2:	jsr	getnibble
002590  1  C9 10        		cmp	#16
002592  1  B0 1B        		bcs	getadr3
002594  1  A2 03        		ldx	#3
002596  1  0E EC 26     getadr4:	asl	WORD
002599  1  2E ED 26     		rol	WORD+1
00259C  1  CA           		dex
00259D  1  10 F7        		bpl	getadr4
00259F  1  6D EC 26     		adc	WORD
0025A2  1  8D EC 26     		sta	WORD
0025A5  1  90 03        		bcc	getadr1
0025A7  1  EE ED 26     		inc	WORD+1
0025AA  1  CE 1D 29     getadr1:	dec	CNT
0025AD  1  D0 DE        		bne	getadr2
0025AF  1  60           getadr3:	rts
0025B0  1               
0025B0  1  20 75 26     getnibble:	jsr	GETKEY
0025B3  1  C9 9B        		cmp	#EOL
0025B5  1  F0 21        		beq	getnibex
0025B7  1  C9 58        		cmp	#'X'
0025B9  1  F0 1D        		beq	getnibex
0025BB  1  C9 30        		cmp	#'0'
0025BD  1  90 F1        		bcc	getnibble
0025BF  1  C9 3A        		cmp	#'9'+1
0025C1  1  90 0F        		bcc	getnib09
0025C3  1               
0025C3  1  C9 41        		cmp	#'A'
0025C5  1  90 E9        		bcc	getnibble
0025C7  1  C9 47        		cmp	#'F'+1
0025C9  1  B0 E5        		bcs	getnibble
0025CB  1  20 56 26     		jsr	PRINT
0025CE  1  38           		sec
0025CF  1  E9 37        		sbc	#'A'-10
0025D1  1  60           		rts
0025D2  1  20 56 26     getnib09:	jsr	PRINT
0025D5  1  38           		sec
0025D6  1  E9 30        		sbc	#'0'
0025D8  1  60           getnibex:	rts
0025D9  1               
0025D9  1               ;
0025D9  1               ; reads a byte value given in decimal
0025D9  1               ;
0025D9  1  A2 03        getbyte:	ldx	#3
0025DB  1  8E EE 26     		stx	PACKDEC
0025DE  1  A9 00        		lda	#0
0025E0  1  8D EC 26     		sta	WORD
0025E3  1  8D ED 26     		sta	WORD+1
0025E6  1  20 1D 26     getbyte1:	jsr	getnum
0025E9  1  30 2E        		bmi	getbyteex
0025EB  1  AD EC 26     		lda	WORD
0025EE  1  0A           		asl
0025EF  1  2E ED 26     		rol	WORD+1
0025F2  1  0A           		asl
0025F3  1  2E ED 26     		rol	WORD+1
0025F6  1  6D EC 26     		adc	WORD
0025F9  1  8D EC 26     		sta	WORD
0025FC  1  90 03        		bcc	getbyte2
0025FE  1  EE ED 26     		inc	WORD+1
002601  1  0A           getbyte2:	asl
002602  1  8D EC 26     		sta	WORD
002605  1  2E ED 26     		rol	WORD+1
002608  1  98           		tya
002609  1  6D EC 26     		adc	WORD
00260C  1  8D EC 26     		sta	WORD
00260F  1  90 03        		bcc	getbyte3
002611  1  EE ED 26     		inc	WORD+1
002614  1  CE EE 26     getbyte3:	dec	PACKDEC
002617  1  D0 CD        		bne	getbyte1
002619  1  AD EC 26     getbyteex:	lda	WORD
00261C  1  60           		rts
00261D  1               
00261D  1  20 75 26     getnum:		jsr	GETKEY
002620  1  C9 9B        		cmp	#EOL
002622  1  F0 0E        		beq	getnumex
002624  1  C9 30        		cmp	#'0'
002626  1  90 F5        		bcc	getnum
002628  1  C9 3A        		cmp	#'9'+1
00262A  1  B0 F1        		bcs	getnum
00262C  1  20 56 26     		jsr	PRINT
00262F  1  38           		sec
002630  1  E9 30        		sbc	#'0'
002632  1  A8           getnumex:	tay
002633  1  60           		rts
002634  1               
002634  1               ;
002634  1  48           puthex:		pha
002635  1  48           		pha
002636  1  4A           		lsr
002637  1  4A           		lsr
002638  1  4A           		lsr
002639  1  4A           		lsr
00263A  1  20 45 26     		jsr	putnib
00263D  1  68           		pla
00263E  1  29 0F        		and	#$0f
002640  1  20 45 26     		jsr	putnib
002643  1  68           		pla
002644  1  60           		rts
002645  1               
002645  1  C9 0A        putnib:		cmp	#10
002647  1  90 02        		bcc	putnib1
002649  1  69 06        		adc	#6
00264B  1  69 30        putnib1:	adc	#'0'
00264D  1  4C 56 26     		jmp	PRINT
002650  1               
002650  1  A9 20        SPACE:		lda	#32
002652  1  D0 02        		bne	PRINT
002654  1  A9 9B        NEWLINE:	lda	#EOL
002656  1  48           PRINT:		pha
002657  1  8A           		txa
002658  1  48           		pha
002659  1  98           		tya
00265A  1  48           		pha
00265B  1  A2 0B        		ldx	#CPUTB
00265D  1  8E 42 03     		stx	ICCOM
002660  1  BA           		tsx
002661  1  BD 03 01     		lda	$103,X
002664  1  A2 00        		ldx	#0
002666  1  8E 48 03     		stx	ICBLL
002669  1  8E 49 03     		stx	ICBLH
00266C  1  20 56 E4     		jsr	CIOV
00266F  1  68           		pla
002670  1  A8           		tay
002671  1  68           		pla
002672  1  AA           		tax
002673  1  68           		pla
002674  1  60           		rts
002675  1               
002675  1  AD 25 E4     GETKEY:		lda	$E425
002678  1  48           		pha
002679  1  AD 24 E4     		lda	$E424
00267C  1  48           		pha
00267D  1  60           		rts
00267E  1               ;
00267E  1  20 B4 26     PRTWORD:	jsr	WORD2D
002681  1  A2 00        		ldx	#0
002683  1  A0 00        		ldy	#0
002685  1  B9 EE 26     PRTWRD1:	lda	PACKDEC,Y
002688  1  4A           		lsr
002689  1  4A           		lsr
00268A  1  4A           		lsr
00268B  1  4A           		lsr
00268C  1  20 A6 26     		jsr	PRTNIB
00268F  1  C0 02        		cpy	#2
002691  1  D0 01        		bne	PRTWRD2
002693  1  E8           		inx
002694  1  B9 EE 26     PRTWRD2:	lda	PACKDEC,Y
002697  1  29 0F        		and	#15
002699  1  20 A6 26     		jsr	PRTNIB
00269C  1  C8           		iny
00269D  1  C0 03        		cpy	#3
00269F  1  D0 E4        		bne	PRTWRD1
0026A1  1  A2 00        		ldx	#0
0026A3  1  4C 54 26     		jmp	NEWLINE
0026A6  1               
0026A6  1  D0 05        PRTNIB:		bne	PRTNIB1
0026A8  1  E0 00        		cpx	#0
0026AA  1  D0 01        		bne	PRTNIB1
0026AC  1  60           		rts
0026AD  1               
0026AD  1  E8           PRTNIB1:	inx
0026AE  1  18           		clc
0026AF  1  69 30        		adc	#'0'
0026B1  1  4C 56 26     		jmp	PRINT
0026B4  1               
0026B4  1               
0026B4  1  8E ED 26     WORD2D:		stx	WORD+1
0026B7  1  8D EC 26     		sta	WORD
0026BA  1               
0026BA  1  A2 02        		ldx	#2
0026BC  1  A9 00        		lda	#0
0026BE  1  9D EE 26     WORD2D1:	sta	PACKDEC,X
0026C1  1  CA           		dex
0026C2  1  10 FA        		bpl	WORD2D1
0026C4  1               
0026C4  1  F8           		sed
0026C5  1  A2 10        		ldx	#16
0026C7  1               
0026C7  1  0E EC 26     WORD2D3:	asl	WORD
0026CA  1  2E ED 26     		rol	WORD+1
0026CD  1               
0026CD  1  A0 02        		ldy	#2
0026CF  1  B9 EE 26     WORD2D2:	lda	PACKDEC,Y
0026D2  1  79 EE 26     		adc	PACKDEC,Y
0026D5  1  99 EE 26     		sta	PACKDEC,Y
0026D8  1  88           		dey
0026D9  1  10 F4        		bpl	WORD2D2
0026DB  1               
0026DB  1  CA           		dex
0026DC  1  D0 E9        		bne	WORD2D3
0026DE  1               
0026DE  1  D8           		cld
0026DF  1  60           		rts
0026E0  1               
0026E0  1               ;
0026E0  1               ;
0026E0  1               ;
0026E0  1               
0026E0  1               ;
0026E0  1               ; VAR + CONST
0026E0  1               ;
0026E0  1               
0026E0  1               PERCOM:
0026E0  1  00           PERTRK:		.byte	0
0026E1  1  00           PERSTP:		.byte	0
0026E2  1  00 00        PERSEC:		.word	0
0026E4  1  00           PERHEA:		.byte	0
0026E5  1  00           PERDEN:		.byte	0
0026E6  1  00 00        PERBYT:		.word	0
0026E8  1  00           PERSTA:		.byte	0
0026E9  1  00           PERRAT:		.byte	0
0026EA  1  00           PERX01:		.byte	0
0026EB  1  00           PERX02:		.byte	0
0026EC  1               
0026EC  1  00 00        WORD:		.word	0
0026EE  1  00 00 00     PACKDEC:	.byte	0,0,0
0026F1  1               
0026F1  1  7D           SALLYMSG:	.byte	CLS
0026F2  1  2A 2A 2A 2A  		.byte	"******************", EOL
0026F6  1  2A 2A 2A 2A  
0026FA  1  2A 2A 2A 2A  
002705  1  2A 20 53 61  		.byte	"* Sally 2 tools  *", EOL
002709  1  6C 6C 79 20  
00270D  1  32 20 74 6F  
002718  1  2A 2A 2A 2A  		.byte	"******************", EOL
00271C  1  2A 2A 2A 2A  
002720  1  2A 2A 2A 2A  
00272B  1  9B           		.byte	EOL
00272C  1  44 20 2D 20  		.byte	"D - Dump memory", EOL
002730  1  44 75 6D 70  
002734  1  20 6D 65 6D  
00273C  1  47 20 2D 20  		.byte	"G - Goto address", EOL
002740  1  47 6F 74 6F  
002744  1  20 61 64 64  
00274D  1  46 20 2D 20  		.byte	"F - Format", EOL
002751  1  46 6F 72 6D  
002755  1  61 74 9B     
002758  1  4E 20 2D 20  		.byte	"N - Test NACK (Cmd 'X')", EOL
00275C  1  54 65 73 74  
002760  1  20 4E 41 43  
002770  1  50 20 2D 20  		.byte	"P - Percom Block Config", EOL
002774  1  50 65 72 63  
002778  1  6F 6D 20 42  
002788  1  52 20 2D 20  		.byte	"R - Reset Sally", EOL
00278C  1  52 65 73 65  
002790  1  74 20 53 61  
002798  1  53 20 2D 20  		.byte	"S - Get Status", EOL
00279C  1  47 65 74 20  
0027A0  1  53 74 61 74  
0027A7  1  54 20 2D 20  		.byte	"T - Test (read) all sectors", EOL
0027AB  1  54 65 73 74  
0027AF  1  20 28 72 65  
0027C3  1  55 20 2D 20  		.byte	"U - upload sally2.com", EOL
0027C7  1  75 70 6C 6F  
0027CB  1  61 64 20 73  
0027D9  1  56 20 2D 20  		.byte	"V - Show Sally 2 version", EOL
0027DD  1  53 68 6F 77  
0027E1  1  20 53 61 6C  
0027F2  1  58 20 2D 20  		.byte	"X - EXIT", EOL
0027F6  1  45 58 49 54  
0027FA  1  9B           
0027FB  1  00           		.byte	0
0027FC  1               
0027FC  1  9B           PERTXT0:	.byte	EOL
0027FD  1  44 69 73 70  		.byte	"Display PERCOM for"
002801  1  6C 61 79 20  
002805  1  50 45 52 43  
00280F  1  20 55 6E 69  		.byte	" Unit (1-8 / x)?"
002813  1  74 20 28 31  
002817  1  2D 38 20 2F  
00281F  1  00           		.byte	0
002820  1               
002820  1  9B           PERTXT1:	.byte	EOL
002821  1  2A 2A 2A 2A  		.byte	"****************"
002825  1  2A 2A 2A 2A  
002829  1  2A 2A 2A 2A  
002831  1  9B           		.byte	EOL
002832  1  2A 20 50 45  		.byte	"* PERCOM BLOCK *"
002836  1  52 43 4F 4D  
00283A  1  20 42 4C 4F  
002842  1  9B           		.byte	EOL
002843  1  2A 2A 2A 2A  		.byte	"****************"
002847  1  2A 2A 2A 2A  
00284B  1  2A 2A 2A 2A  
002853  1  9B           		.byte	EOL
002854  1  55 6E 69 74  MSGDUNIT:	.byte	"Unit       : "
002858  1  20 20 20 20  
00285C  1  20 20 20 3A  
002861  1  00           		.byte	0
002862  1               
002862  1  54 72 61 63  MSGTRK:		.byte	"Tracks     : "
002866  1  6B 73 20 20  
00286A  1  20 20 20 3A  
00286F  1  00           		.byte	0
002870  1  53 74 65 70  		.byte	"Step       : "
002874  1  20 20 20 20  
002878  1  20 20 20 3A  
00287D  1  00           		.byte	0
00287E  1  53 65 63 2F  MSGSEC:		.byte	"Sec/Trk    : "
002882  1  54 72 6B 20  
002886  1  20 20 20 3A  
00288B  1  00           		.byte	0
00288C  1  48 65 61 64  MSGHEA:		.byte	"Heads (0-1): "
002890  1  73 20 28 30  
002894  1  2D 31 29 3A  
002899  1  00           		.byte	0
00289A  1  44 65 6E 73  MSGDEN:		.byte	"Density    : "
00289E  1  69 74 79 20  
0028A2  1  20 20 20 3A  
0028A7  1  00           		.byte	0
0028A8  1  42 79 74 2F  MSGBYT:		.byte	"Byt/Sec    : "
0028AC  1  53 65 63 20  
0028B0  1  20 20 20 3A  
0028B5  1  00           		.byte	0
0028B6  1  53 65 6C 65  		.byte	"Select     : "
0028BA  1  63 74 20 20  
0028BE  1  20 20 20 3A  
0028C3  1  00           		.byte	0
0028C4  1  53 65 72 52  		.byte	"SerRate    : "
0028C8  1  61 74 65 20  
0028CC  1  20 20 20 3A  
0028D1  1  00           		.byte	0
0028D2  1  D4 72 61 63  		.byte	'T'+128, "racks ", 'S'+128, "ecs ", 'H'+128, "eads ", 'D'+128, "ensity ", 'B'+128, "ytes", EOL
0028D6  1  6B 73 20 D3  
0028DA  1  65 63 73 20  
0028F2  1  D7 72 69 74  		.byte	'W'+128, "rite  ", 'E', 'x'+128, "it", EOL
0028F6  1  65 20 20 45  
0028FA  1  F8 69 74 9B  
0028FE  1  00           		.byte	0
0028FF  1               
0028FF  1  44 3A 53 41  sallycom:	.byte	"D:SALLY2.COM",EOL
002903  1  4C 4C 59 32  
002907  1  2E 43 4F 4D  
00290C  1  61 64 64 72  msgadr:		.byte	"address:",0
002910  1  65 73 73 3A  
002914  1  00           
002915  1  00 00        ATADR:		.word	0
002917  1  00 00        SALLYADR:	.word	0
002919  1  00 00        SALLYLEN:	.word	0
00291B  1  00 00        DUMPADR:	.word	0
00291D  1  00           CNT:		.byte	0
00291E  1  00           BUFFER:		.byte	0
00291E  1               
